<div class="container mt-4" *ngIf="orders.length !== 0 && !isLoading">
  <h2 class="mb-3">Your Orders</h2>
  
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Order ID</th>
        <th>Order Date</th>
        <th>Total Amount</th>
        <th>Details</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let order of orders; let i = index">
        <!-- Order Row -->
        <tr>
          <td>{{ order.id }}</td>
          <td>{{ order.orderTime | date: 'yyyy-MM-dd HH:mm:ss' }}</td>
          <td>{{ order.totalPrice | currency:'USD' }}</td>
          <td>
            <button class="btn apple-btn" (click)="toggleOrderDetails(i)">
              {{ expandedIndex === i ? 'Hide Details' : 'Show Details' }}
            </button>            
          </td>
        </tr>
        <!-- Order Details Row -->
        <tr *ngIf="expandedIndex === i">
          <td colspan="4">
            <div class="mt-3">
              <h5>Order Items:</h5>
              <table class="table table-sm">
                <thead>
                  <tr>
                    <th>Product ID</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Subtotal</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of order.items">
                    <td>{{ item.productId }}</td>
                    <td>{{ item.quantity }}</td>
                    <td>{{ item.singleProductPrice | currency:'USD' }}</td>
                    <td>{{ (item.quantity * item.singleProductPrice) | currency:'USD' }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>